<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <link rel="icon" href="imgs/Desespero.webp" type="image/png">

    <title>Bem Vindo</title>



    <style>
body {
    margin: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: black;
}

/* Elementos ocultos e transições */
.bootline {
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.5s ease, transform 0.5s ease;
    padding: 4px;
}

.bootline.visible {
    opacity: 1;
    transform: translateY(0);
}

.hidden {
    display: none;
}

/* Efeito de ruído e animações */
.noise {
    position: absolute;
    width: 100%;
    height: 100%;
    background-repeat: no-repeat;
    background-size: cover;
    opacity: 3%;
    z-index: 2;
    pointer-events: none;
}

@keyframes fadeeffect {
    0%, 100% { opacity: 3%; }
    50% { opacity: 45%; }
}

.fade-animation {
    animation: fadeeffect 5s linear;
}

/* Tela principal */
#tela {
    position: relative;
    width: 1920px;
    height: 800px;
    background-color: #553f66;
    overflow: hidden;
}

#scanlines, #bezel {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    z-index: 3;
    pointer-events: none;
}

#scanlines {
    opacity: 85%;
}

/* Containers de texto */
.texto {
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    height: 724px;
    overflow-y: auto;
    padding: 10px 20px 10px 10px;
    margin-top: 10px;
}

.enigmatexto {
    display: flex;
    align-items: center;
    flex-direction: column;
    justify-content: center;
    width: 600px;
    height: 100vh;
    padding: 0;
    gap: 10px;
}

.boot {
    display: flex;
    flex-direction: column;
    align-items: left;
    justify-content: top;
    height: 724px;
    margin-top: 35px;
    overflow: hidden;
    padding: 10px 20px 10px 10px;
}

/* Scrollbar customizada */
.texto::-webkit-scrollbar {
    width: 8px;
}

.texto::-webkit-scrollbar-thumb {
    background-color: #fd57ff;
    border-radius: 4px;
}

.texto::-webkit-scrollbar-track {
    background-color: transparent;
}

/* Estilo principal do texto */
#content {
    font-family: VT323;
    padding: 60px 60px 50px;
    padding-top: 20px;
    margin-left: 10px;
    color: #fd57ff;
    font-size: 20px;
    text-shadow: 
        1px 1px 2px #070107,
        0 0 10px #fd57ff,
        0 0 20px #fd57ff,
        0 0 40px #a100c1,
        0 0 80px #a100c1;
    z-index: 1;
}

/* Elementos de conteúdo */
#teste {
    display: inline-block;
    margin-bottom: 40px;
    padding: 0;
    border: 0;
}

h1, h2 {
    margin: 0;
    padding: 0;
}

/* Imagens e vídeos */
.archiveimages {
    width: 300px;
    height: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    filter: grayscale(0%) contrast(120%) brightness(200%) saturate(120%) drop-shadow(0 0 30px #a100c1);
    mix-blend-mode: screen;
    border-radius: 0;
    image-rendering: pixelated;
}

.archivevideos {
    width: 800px;
    height: auto;
}

.enigmaimages2 {
    width: 850px !important;
    height: auto !important;
    filter:
        drop-shadow(1px 1px 10px #070107)
        drop-shadow(0 0 10px #fd57ff)
        drop-shadow(0 0 10px #fd57ff)
        drop-shadow(0 0 20px #a100c1)
        drop-shadow(0 0 40px #a100c1);
    padding: 25px;
    overflow: hidden;
}

/* Containers de arquivo */
#arquivo1, .arquivo2 {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
}

/* Símbolo */
#simbolo {
    padding-top: 40px;
    height: 150px;
    width: 150px;
    filter:
        drop-shadow(1px 1px 2px #070107)
        drop-shadow(0 0 10px #fd57ff)
        drop-shadow(0 0 20px #fd57ff)
        drop-shadow(0 0 40px #a100c1)
        drop-shadow(0 0 80px #a100c1);
    pointer-events: none;
}

/* Elementos interativos */
.subcontent {
    color: #ffffff;
    transition: 0.5s ease;
    margin: 1px 0 10px;
}

.subcontent:hover {
    background-color: #2aa1b3;
}

.textosub:hover {
    background-color: transparent !important;
}

.btn-voltar {
    margin-top: 10px;
}

/* Utilidades */
.noselect {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* Animação de tremor */
.rage-shaking {
    display: inline-block;
}

.rage-shaking:hover {
    animation: rage-shaking 0.5s infinite;
}

@keyframes rage-shaking {
    0%   { transform: translate(1px, 1px) rotate(0deg); }
    10%  { transform: translate(-1px, -2px) rotate(-1deg); }
    20%  { transform: translate(-3px, 0px) rotate(1deg); }
    30%  { transform: translate(3px, 2px) rotate(0deg); }
    40%  { transform: translate(1px, -1px) rotate(1deg); }
    50%  { transform: translate(-1px, 2px) rotate(-1deg); }
    60%  { transform: translate(-3px, 1px) rotate(0deg); }
    70%  { transform: translate(3px, 1px) rotate(-1deg); }
    80%  { transform: translate(-1px, -1px) rotate(1deg); }
    90%  { transform: translate(1px, 2px) rotate(0deg); }
    100% { transform: translate(1px, -2px) rotate(-1deg); }
}

/* Tipografia do boot */
.textoboot h1 {
    font-size: 30px;
}

.textoboot h2,
.textoboot span {
    font-size: 25px;
}
    </style>

</head>
    
<body>

    <div id="tela">
        <img src="https://media.giphy.com/media/oEI9uBYSzLpBK/giphy.gif" class="noise noselect">
        <img src="imgs/scanlines.webp" id="scanlines" class="noselect">
        <img src="imgs/bezel.webp" id="bezel" class="noselect">

        <div id="content">

            <!-- tela de boot -->

            <section class="boot tela" style="display: block;">



                <section class="textoboot">
                    <h1 class="bootline hidden" data-delay="3490">>> IBM Personal Computer</h1>
                    <h1 class="bootline hidden" data-delay="3490">>> Copyright (C) IBM Corp. 1981-1993</h1>
                    <h1 class="bootline hidden" data-delay="3490">>> Todos os direitos reservados</h1>

                    <h2 class="bootline hidden" data-delay="5490" style="margin-top: 100px;">>> Adaptador de Vídeo VGA Detectado</h2>
                    <h2 class="bootline hidden" data-delay="6090">>> Porta de teclado AT Detectada</h2>
                    <h2 class="bootline hidden" data-delay="6690">>> Porta serial COM1 Detectada</h2>
                    <h2 class="bootline hidden" data-delay="7490">>> Verificando Configuração do Sistema...</h2>
                    <h2 class="bootline hidden" data-delay="9490">>> Carregando Configuração CMOS... OK</h2>
                    <h2 class="bootline hidden" data-delay="11690">>> Buscando Disco Rígido...</h2>
                    
                    <div id="teste" class="bootline hidden" data-delay="12890" style="margin-top: 100px;">
                        <h1 class="text">
                        <span class="boottype"></span>
                        </h1>
                    </div>

                    <audio id="bootaudio" autoplay >
                        <source src="imgs/booting.mp3" type="audio/mpeg">
                    </audio>

                </section>
            </section>

            <section class="textoimg" style="display: none; align-items: center; justify-content: center; display: flex; padding: 0; margin: 0; height: 100vh;">

                    <img src="imgs/logo.webp" class="archiveimages" style="width: 200px; height: 200px;">

            </section> 

            <!-- tela menu  -->

            <section class="tela" id="inicio" style="display:block">
                <img src="imgs/Desespero.webp" id="simbolo" class="noselect">

                <h1>
                    20/04/2025
                </h1>

                <div id="teste">
                    <h1 class="text">
                    <span class="auto-type"></span>
                    </h1>
                </div>
                
                <div id="auto-container" class="hidden" data-delay="10" style="margin-top: 100px;">
  <h1 class="text">
    <span class="auto-type"></span>
  </h1>
</div>


                <section>

                    <h3 class="subcontent" id="arquivobtn">> Arquivos</h3>

                    <div id="arquivomenu" style="display:none;">
                        <h3 class="subcontent arquivo-btn" data-arquivo="arquivo1">> Beautiful Sky</h3>
                        <h3 class="subcontent arquivo-btn" data-arquivo="arquivo2">> Traição</h3>
                        <h3 class="subcontent arquivo-btn" data-arquivo="arquivo3" style="display:none;"> > Orgulho</h3>
                        <h3 class="subcontent arquivo-btn" data-arquivo="arquivo4" style="display:none;"> > Confiança</h3>
                        <h3 class="subcontent arquivo-btn" data-arquivo="arquivo5" style="display:none;"> > Confusão</h3>
                        <h3 class="subcontent arquivo-btn" data-arquivo="arquivo6" style="display:none;"> > Tempo</h3>
                        <h3 class="subcontent arquivo-btn" data-arquivo="arquivo7" style="display:none;"> > Destino</h3>
                        <h3 class="subcontent arquivo-btn" data-arquivo="arquivo8" style="display:none;"> > Saída</h3>
                        <h3 class="subcontent arquivo-btn" data-arquivo="arquivo9" style="display:none;"> > 🎂</h3>

                    </div>

                </section>

            </section>

        


            <section class="texto" id="arquivo1" style="display: none; align-items: center; justify-content: center;">

                <div style="margin-top: 55vh; padding-bottom: 10px;">

                    <img src="imgs/incident.webp" class="archiveimages">
                </div>
                

                <h3 class="subcontent textosub" style="margin-left: 15px">

                    14/05/2025 - Editorial: A OBCE é um fracasso — e o céu rachado é a cicatriz que nos lembra disso todos os dias<br>
                    Por Vírus<br>
                    <br>
                        Ah, a OBCE. Organização Brasileira Contra Exoterrorismo. Que belo nome pomposo pra um bando de incompetentes que não consegue manter nem o próprio quintal limpo, quem dirá proteger o mundo do paranormal. Desde que surgiu, se vende como a “última linha de defesa” entre nós e o sobrenatural. Pois bem. Se essa é nossa última linha, estamos todos condenados.

                        14 de maio de 2024. Um dia que entrou pra história — pelas piores razões possíveis. O mundo parou, o céu rachou, monstros desceram como chuva e a humanidade, mais uma vez, foi deixada à própria sorte. A tal “Unificação”, como chamaram essa catástrofe digna de filme de terror, foi o momento em que tudo desmoronou. Literalmente. O céu rachou como vidro estilhaçado, e dele começaram a brotar criaturas que nem seus piores pesadelos ousariam desenhar.

                        Onde estava a OBCE? Ah, estavam lá. Com seus uniformes pretos, armas reluzentes e posturas de heróis de quadrinhos. Tentaram lutar? Tentaram. E então desistiram. Simples assim. Quando viram que não estavam dando conta, largaram tudo — e o mais revoltante: permitiram que a maníaca conhecida como Blood Mary prosseguisse com o ritual.

                        Se seu filho morreu naquela noite, se sua casa foi engolida por uma sombra vinda do céu, se você vive com medo de dormir porque pode acordar com um demônio sussurrando no seu ouvido... agradeça à OBCE. Foi uma escolha. A liderança da organização, sob o comando da eternamente desastrosa Camila Lerone, decidiu que o ritual tinha que acontecer. Porque, segundo eles, “era o mal menor”. Pois é. A morte de milhares virou só uma estatística conveniente.

                        Desde aquele dia maldito, de <span class="rage-shaking">7 em 7 horas</span> surge um novo caso paranormal sendo reportado ao redor do globo. De <span class="rage-shaking">7 em 7 minutos</span>, alguém morre por causa do desequilíbrio que eles deixaram acontecer. E de <span class="rage-shaking">7 em 7 dias</span>, aparece um novo “especialista da OBCE” tentando justificar o injustificável.

                        Sabe o que mais acontece de <span class="rage-shaking">7 em 7?</span> Meu nojo pela OBCE cresce <span class="rage-shaking">sete vezes.</span> Eles falharam. Falharam com a humanidade. Falharam com o mundo. E o que fizeram depois? Conferência de imprensa, discurso pronto e pose pra foto. Enquanto isso, o céu continua rachado, visível pra qualquer um que tenha olhos. A lembrança constante do fracasso retumbante da OBCE.

                        Camila Lerone ainda está no comando. Por quê? Porque aparentemente, nessa organização, quanto mais você erra, mais te promovem. Deveria estar sendo julgada por negligência paranormal em escala global, mas não. Segue dando ordens, cercada por um bando de puxa-sacos uniformizados que mais parecem figurantes de filme B.

                        A OBCE não é solução. É o problema. Um parasita estatal que consome recursos, promete segurança e entrega caos. Devia ser extinta. Ponto. Dê esse dinheiro pra qualquer criança com um estilingue e ela fará mais pelo combate ao paranormal do que esses fracassados fizeram em anos.

                        A OBCE nos traiu. E enquanto o céu continuar rachado, vamos continuar olhando pra cima e lembrando: o mundo caiu porque eles deixaram.
                </h3>
                <h3 class="subcontent btn-voltar">> Voltar </h3>
                

            </section>

        <!--Arquivo 2 Traição - I wanna be 2:32-->
            
            <section class="texto" id="arquivo2" style="display: none;">

                <div class="enigmatexto">

                    <!-- <img src="imgs/enigmas/traicao.webp" class="enigmaimages2"> -->

                    <h3 class="subcontent textosub" style="padding-top: 10px;">
                        AAAAAAqAAAAAAA Ayhpjhv lb apuoh AAAAhAAAAA abkv thz wlykp hsnblt wvy
                        nhuhujph AAAAAAAArAAAAA kl hsnblt xbl AAAlAAAAAAAAA jvuzpklylp tlb pythv
                        AAAMAAAAAAA
                        Lzzh AAAyAAAAAAAA vynhupghjhv AhAAAAAAAAAAAA tl klb AAAAAAAAAuAAAA
                        lzwlyhujhz pualyul, thz AAAAjAAAAAAA wlyjlip xbl lzwlyhujh uãv é uv v
                        AAAAAhAAAAAA zpnupmpjhkv AAAAAAAAAAA kv L kv AAAAAAAAAA VIJL whyhpzv
                        AAAAAAAAAAAA thz v Vynbsov wvkl hal AAAAAAAAAAAAA zly
                       </h3>

                    <!-- <video controls src="/imgs/enigma1.mp4" class="archiveimages archivevideos" autoplay muted loop></video> -->
                
              
                    <input type="text" class="resposta" data-enigma="1">
                    <button class="verificar">Enviar</button>

                    <h3 class="subcontent btn-voltar">> Voltar </h3>
                </div>
                
            </section>

            <!--Arquivo 3 Orgulho  - Pais e filhos 5:08 -->

            <section class="texto" id="arquivo3" style="display: none;">

                <div class="enigmatexto">

                    <img src="imgs/banheiro.webp" class="enigmaimages2">
                

                <input type="text" class="resposta" data-enigma="2">
                <button class="verificar">Enviar</button>

                <h3 class="subcontent btn-voltar">> Voltar </h3>

                </div>

            </section>
            
            <!--Arquivo 4 Confianca the red means i love you 3:53-->

            <section class="texto" id="arquivo4" style="display: none;">

                <div class="enigmatexto">

                    <img src="imgs/enigmas/confianca.webp" class="enigmaimages2">

                

                <input type="text" class="resposta" data-enigma="3">
                <button class="verificar">Enviar</button>

                <h3 class="subcontent btn-voltar">> Voltar </h3>

                </div>

            </section>
                        
            <!--Arquivo 5 Confusao The water is fine 4:00-->

            <section class="texto" id="arquivo5" style="display: none;">

                <div class="enigmatexto">

                    <h3 class="subcontent textosub" style="padding-top: 10px;">
                        JvumbzhvAAAgAAjylzjlyAAAAhAAzltAAAAAsltiyhyAAAjAAklAAAArAAAAavkhAAtAAA
                        AAlbAAApAAAAAAAAAAbthAAAkAAAcpkhAAAsAAlAAAAlAAtlpvAAyAAAlunyhçhkvA
                        AAAAAAzlAAAAzvbAAAAcvjêAAAAAlzxbljlyAAAAAxblAAAAAlAAAAAayánpjvAAAAAA
                        AAAbkvAAAAAhAAAAAxblAAAAAAAlbAAAAAAklclyphAAAAAAAAtlAAAAAsltiyhyAAA
                        AAAAAAAAuãvAAAAAAmpsohAAAAAtlAAAAAptwvyahAAAAAthpzAAAAAlbAAAAAq
                        hAAAAAAAaluovAAAAAkvAAAAAAAhAAAAwhyalAAAAAxblAAAAAtlAAAAAmhsahAA
                        AAALAAAAAypvAAAAAAAuãvAAAAAzlpAAAAAjvtvAAAAAcpcpAAAAAlzzlAAAAAaltw
                        vAAAAAavkvAAAAAzltAAAAAlshAAAAAubujhAAAAAlzapclAAAAAjvtwslavAAAAAzlt
                        wylAAAAAchgpvAAAAAzltwylAAAAAklwyptpkvAAAAAzltwylAAAAAOhyslfAAAAASva
                        oly
                    </h3>

                <input type="text" class="resposta" data-enigma="4">
                <button class="verificar">Enviar</button>

                <h3 class="subcontent btn-voltar">> Voltar </h3>

                </div>

            </section>

            <!--Arquivo 6 Tempo Perdido 5:02-->

            <section class="texto" id="arquivo6" style="display: none;">

                <div class="enigmatexto">

                    <img src="imgs/enigmas/tempo.webp" class="enigmaimages2">

                

                <input type="text" class="resposta" data-enigma="5">
                <button class="verificar">Enviar</button>

                <h3 class="subcontent btn-voltar">> Voltar </h3>

                </div>

            </section>

            
            <!--Arquivo 7 Destino The water is fine 3:13-->

            <section class="texto" id="arquivo7" style="display: none;">

                <div class="enigmatexto">

                    <img src="imgs/casanaarvore.webp" class="enigmaimages2">

                

                <input type="text" class="resposta" data-enigma="6">
                <button class="verificar">Enviar</button>

                <h3 class="subcontent btn-voltar">> Voltar </h3>

                </div>

            </section>

             <!--Arquivo 8 WHO IS WITH YOU? The water is fine 3:13-->

             
            <section class="texto" id="arquivo8" style="display: none; align-items: center; justify-content: center;">

                <div class="enigmatexto">

                    <h1 class="subcontent textosub">Quem está com você, Miles?</h1>

                

                <input type="text" class="resposta" data-enigma="8">
                <button class="verificar">Enviar</button>

                <h3 class="subcontent btn-voltar">> Voltar </h3>

                </div>

            </section>

                         <!--Arquivo 9 Parabens  3:13-->

             
                         <section class="texto" id="arquivo9" style="display: none; align-items: center; justify-content: center;">

                            <div class="enigmatexto">
                                <h1 class="subcontent textosub">Parabéns! Você não é tão burro assim</h1>
                            
                            <h2>
                                A gente se vê em breve
                            </h2>

                            <audio id="end"  loop>
                                <source src="imgs/Congratulations.mp3" type="audio/mpeg">
                            </audio>
                            
                            <h3 class="subcontent btn-voltar">> Voltar </h3>

                            </div>
            
            </section>
            

        </div>

    </div>

    <script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>

    <script>
// Otimizações aplicadas:
// - Cache de elementos DOM
// - Delegação de eventos
// - Debounce para inputs
// - Uso de Map para melhor performance
// - Lazy loading de animações
// - Remoção de queries desnecessárias

class SiteManager {
  constructor() {
    // Cache de elementos DOM
    this.elements = {
      arquivobtn: document.getElementById("arquivobtn"),
      arquivomenu: document.getElementById("arquivomenu"),
      inicio: document.getElementById("inicio"),
      bootTela: document.querySelector(".boot.tela"),
      textoimg: document.querySelector(".textoimg"),
      noise: document.querySelector(".noise"),
      bootaudio: document.getElementById("bootaudio"),
      testeElement: document.querySelector("#teste")
    };

    // Estado da aplicação
    this.state = {
      aberto: false,
      isAnimating: false
    };

    // Cache das respostas do enigma usando Map para melhor performance
    this.respostasCodificadas = new Map([
      [1, atob("MjozMg==")], // "2:32"
      [2, atob("NTowOA==")], // "5:08"
      [3, atob("Mzo1Mw==")], // "3:53"
      [4, atob("NDowMA==")], // "4:00"
      [5, atob("NTowMg==")], // "5:02"
      [6, atob("MzoxMw==")]  // "3:13"
    ]);

    this.nomesAceitos = new Set(["jake", "rafael", "marku", "lother", "xande"]);

    // Inicializar eventos
    this.init();
  }

  init() {
    this.setupMenuToggle();
    this.setupEventDelegation();
    this.setupBootlineAnimation();
    this.setupPageLoad();
  }

  // Otimização do menu toggle
  setupMenuToggle() {
    if (!this.elements.arquivobtn) return;

    this.elements.arquivobtn.addEventListener("click", () => {
      this.state.aberto = !this.state.aberto;
      
      // Batch DOM updates
      requestAnimationFrame(() => {
        this.elements.arquivomenu.style.display = this.state.aberto ? "block" : "none";
        this.elements.arquivobtn.textContent = this.state.aberto ? "> Voltar" : "> Arquivos";
      });
    });
  }

  // Delegação de eventos para melhor performance
  setupEventDelegation() {
    // Usar delegação de eventos no document para capturar todos os cliques
    document.addEventListener("click", (e) => {
      // Handle arquivo buttons
      if (e.target.matches(".arquivo-btn")) {
        this.handleArquivoClick(e.target);
      }
      
      // Handle voltar buttons
      else if (e.target.matches(".btn-voltar")) {
        this.handleVoltarClick();
      }
      
      // Handle verificar buttons
      else if (e.target.matches(".verificar")) {
        this.handleVerificarClick(e.target);
      }
    });
  }

  // Funções otimizadas para handles
  handleArquivoClick(botao) {
    const idArquivo = botao.dataset.arquivo;
    if (!idArquivo) return;

    // Batch DOM operations
    requestAnimationFrame(() => {
      this.elements.inicio.style.display = "none";
      
      // Hide all sections efficiently
      document.querySelectorAll(".texto").forEach(secao => {
        secao.style.display = "none";
      });

      const secaoSelecionada = document.getElementById(idArquivo);
      if (secaoSelecionada) {
        secaoSelecionada.style.display = "flex";
      }
    });
  }

  handleVoltarClick() {
    requestAnimationFrame(() => {
      this.elements.inicio.style.display = "block";
      document.querySelectorAll(".texto").forEach(secao => {
        secao.style.display = "none";
      });
    });
  }

  handleVerificarClick(botao) {
    const input = botao.previousElementSibling;
    if (!input) return;

    const enigmaid = parseInt(input.dataset.enigma);
    const respostaUsuario = input.value.trim().toLowerCase();

    if (this.verificarResposta(enigmaid, respostaUsuario)) {
      this.unlockArquivo(enigmaid);
      this.playNoiseAnimation();
    }
  }

  // Verificação otimizada de resposta
  verificarResposta(enigmaid, respostaUsuario) {
    if (enigmaid === 8) {
      const nomesUsuario = respostaUsuario.split(/[, ]+/).map(nome => nome.trim());
      return nomesUsuario.length > 0 && nomesUsuario.every(nome => this.nomesAceitos.has(nome));
    }
    
    return respostaUsuario === this.respostasCodificadas.get(enigmaid);
  }

  // Unlock otimizado
  unlockArquivo(enigmaid) {
    const unlockId = enigmaid === 8 ? "arquivo9" : `arquivo${enigmaid + 2}`;
    const menubtn = document.querySelector(`.arquivo-btn[data-arquivo="${unlockId}"]`);
    
    if (menubtn) {
      requestAnimationFrame(() => {
        menubtn.style.display = "block";
      });
    }
  }

  // Animação de noise otimizada
  playNoiseAnimation() {
    if (this.state.isAnimating || !this.elements.noise) return;
    
    this.state.isAnimating = true;
    this.elements.noise.classList.add("fade-animation");
    
    setTimeout(() => {
      this.elements.noise.classList.remove("fade-animation");
      this.state.isAnimating = false;
    }, 5000);
  }

  // Animação bootline otimizada com IntersectionObserver
  setupBootlineAnimation() {
    const bootlines = document.querySelectorAll(".bootline");
    if (bootlines.length === 0) return;

    // Usar requestAnimationFrame para animações mais suaves
    bootlines.forEach(el => {
      const delay = Number(el.dataset.delay) || 0;
      
      setTimeout(() => {
        requestAnimationFrame(() => {
          el.classList.remove("hidden");
          el.classList.add("visible");
        });
      }, delay);
    });
  }

  // Setup otimizado do carregamento da página
  setupPageLoad() {
    // Usar requestIdleCallback se disponível para operações não críticas
    const runWhenIdle = window.requestIdleCallback || ((cb) => setTimeout(cb, 1));

    window.addEventListener("load", () => {
      runWhenIdle(() => {
        this.handleAudioSetup();
        this.handlePageTransitions();
      });
    });
  }

  handleAudioSetup() {
    if (!this.elements.bootaudio) return;

    setTimeout(() => {
      this.elements.bootaudio.muted = false;
      this.elements.bootaudio.volume = 1.0;
    }, 1000);
  }

  handlePageTransitions() {
    const lastDelay = Number(this.elements.testeElement?.dataset.delay) || 2000;

    setTimeout(() => {
      // Batch DOM updates
      requestAnimationFrame(() => {
        if (this.elements.bootTela) {
          this.elements.bootTela.style.display = "none";
        }
        if (this.elements.textoimg) {
          this.elements.textoimg.style.display = "flex";
        }

        setTimeout(() => {
          requestAnimationFrame(() => {
            if (this.elements.textoimg) {
              this.elements.textoimg.style.display = "none";
            }
            if (this.elements.inicio) {
              this.elements.inicio.style.display = "block";
            }

            // Lazy load do Typed.js apenas quando necessário
            this.initTypedAnimation();
          });
        }, 1000);
      });
    }, lastDelay + 2000);
  }

  // Inicialização lazy do Typed.js
  initTypedAnimation() {
    // Verificar se Typed está disponível antes de usar
    if (typeof Typed !== 'undefined') {
      const autoTypeElement = document.querySelector(".auto-type");
      if (autoTypeElement) {
        new Typed(".auto-type", {
          strings: [" Bem vinda, Virús.", "Bem vinda, Anfitriã."],
          typeSpeed: 125,
          backSpeed: 125,
        });
      }
    }
  }
}

// Inicialização otimizada com debounce para evitar múltiplas execuções
let siteManager = null;

const initSite = () => {
  if (siteManager) return;
  siteManager = new SiteManager();
};

// Usar DOMContentLoaded para inicialização mais rápida
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initSite);
} else {
  initSite();
}

// Inicialização do Typed.js para boot (mantido fora da classe por ser independente)
document.addEventListener('DOMContentLoaded', () => {
  const bootTypeElement = document.querySelector(".boottype");
  if (bootTypeElement && typeof Typed !== 'undefined') {
    new Typed(".boottype", {
      strings: ["Loading", "Iniciando sistema operacional..."],
      typeSpeed: 125,
      backSpeed: 125,
    });
  }
});


// Observa mudanças na visibilidade do arquivo9
const observer = new MutationObserver(() => {
    const arquivo9 = document.getElementById('arquivo9');
    const audio = document.getElementById('end');
    
    if (arquivo9.style.display !== 'none') {
        audio.play();
    } else {
        audio.pause();
    }
});

// Inicia observação
observer.observe(document.getElementById('arquivo9'), {
    attributes: true,
    attributeFilter: ['style']
});

// Cleanup para evitar memory leaks (opcional)
window.addEventListener('beforeunload', () => {
  if (siteManager) {
    siteManager = null;
  }
});
    </script>

</body>
</html>
